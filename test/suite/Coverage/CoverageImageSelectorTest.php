<?php
namespace Icecave\Woodhouse\Coverage;

use PHPUnit_Framework_TestCase;

class CoverageImageSelectorTest extends PHPUnit_Framework_TestCase
{
    public function setUp()
    {
        $this->selector = new CoverageImageSelector();
    }

    /**
     * @dataProvider getPercentages
     */
    public function testRoundPercentage($percentage, $expected)
    {
        $this->assertSame($expected, $this->selector->roundPercentage($percentage));
    }

    public function testImageFilename()
    {
        $this->assertSame('test-coverage-000.png', $this->selector->imageFilename(0.0));
        $this->assertSame('test-coverage-070.png', $this->selector->imageFilename(72.1));
        $this->assertSame('test-coverage-100.png', $this->selector->imageFilename(100.0));
    }

    public function testErrorImageFilename()
    {
        $this->assertSame('test-coverage-error.png', $this->selector->errorImageFilename());
    }

    public function testUnknownImageFilename()
    {
        $this->assertSame('test-coverage-unknown.png', $this->selector->unknownImageFilename());
    }

    public function getPercentages()
    {
        return array(
            array(0.0,   0),
            array(0.5,   0),
            array(1.0,   0),
            array(1.5,   0),
            array(2.0,   0),
            array(2.5,   0),
            array(3.0,   0),
            array(3.5,   0),
            array(4.0,   0),
            array(4.5,   0),
            array(5.0,   5),
            array(5.5,   5),
            array(6.0,   5),
            array(6.5,   5),
            array(7.0,   5),
            array(7.5,   5),
            array(8.0,   5),
            array(8.5,   5),
            array(9.0,   5),
            array(9.5,   5),
            array(10.0,  10),
            array(10.5,  10),
            array(11.0,  10),
            array(11.5,  10),
            array(12.0,  10),
            array(12.5,  10),
            array(13.0,  10),
            array(13.5,  10),
            array(14.0,  10),
            array(14.5,  10),
            array(15.0,  15),
            array(15.5,  15),
            array(16.0,  15),
            array(16.5,  15),
            array(17.0,  15),
            array(17.5,  15),
            array(18.0,  15),
            array(18.5,  15),
            array(19.0,  15),
            array(19.5,  15),
            array(20.0,  20),
            array(20.5,  20),
            array(21.0,  20),
            array(21.5,  20),
            array(22.0,  20),
            array(22.5,  20),
            array(23.0,  20),
            array(23.5,  20),
            array(24.0,  20),
            array(24.5,  20),
            array(25.0,  25),
            array(25.5,  25),
            array(26.0,  25),
            array(26.5,  25),
            array(27.0,  25),
            array(27.5,  25),
            array(28.0,  25),
            array(28.5,  25),
            array(29.0,  25),
            array(29.5,  25),
            array(30.0,  30),
            array(30.5,  30),
            array(31.0,  30),
            array(31.5,  30),
            array(32.0,  30),
            array(32.5,  30),
            array(33.0,  30),
            array(33.5,  30),
            array(34.0,  30),
            array(34.5,  30),
            array(35.0,  35),
            array(35.5,  35),
            array(36.0,  35),
            array(36.5,  35),
            array(37.0,  35),
            array(37.5,  35),
            array(38.0,  35),
            array(38.5,  35),
            array(39.0,  35),
            array(39.5,  35),
            array(40.0,  40),
            array(40.5,  40),
            array(41.0,  40),
            array(41.5,  40),
            array(42.0,  40),
            array(42.5,  40),
            array(43.0,  40),
            array(43.5,  40),
            array(44.0,  40),
            array(44.5,  40),
            array(45.0,  45),
            array(45.5,  45),
            array(46.0,  45),
            array(46.5,  45),
            array(47.0,  45),
            array(47.5,  45),
            array(48.0,  45),
            array(48.5,  45),
            array(49.0,  45),
            array(49.5,  45),
            array(50.0,  50),
            array(50.5,  50),
            array(51.0,  50),
            array(51.5,  50),
            array(52.0,  50),
            array(52.5,  50),
            array(53.0,  50),
            array(53.5,  50),
            array(54.0,  50),
            array(54.5,  50),
            array(55.0,  55),
            array(55.5,  55),
            array(56.0,  55),
            array(56.5,  55),
            array(57.0,  55),
            array(57.5,  55),
            array(58.0,  55),
            array(58.5,  55),
            array(59.0,  55),
            array(59.5,  55),
            array(60.0,  60),
            array(60.5,  60),
            array(61.0,  60),
            array(61.5,  60),
            array(62.0,  60),
            array(62.5,  60),
            array(63.0,  60),
            array(63.5,  60),
            array(64.0,  60),
            array(64.5,  60),
            array(65.0,  65),
            array(65.5,  65),
            array(66.0,  65),
            array(66.5,  65),
            array(67.0,  65),
            array(67.5,  65),
            array(68.0,  65),
            array(68.5,  65),
            array(69.0,  65),
            array(69.5,  65),
            array(70.0,  70),
            array(70.5,  70),
            array(71.0,  70),
            array(71.5,  70),
            array(72.0,  70),
            array(72.5,  70),
            array(73.0,  70),
            array(73.5,  70),
            array(74.0,  70),
            array(74.5,  70),
            array(75.0,  75),
            array(75.5,  75),
            array(76.0,  75),
            array(76.5,  75),
            array(77.0,  75),
            array(77.5,  75),
            array(78.0,  75),
            array(78.5,  75),
            array(79.0,  75),
            array(79.5,  75),
            array(80.0,  80),
            array(80.5,  80),
            array(81.0,  80),
            array(81.5,  80),
            array(82.0,  80),
            array(82.5,  80),
            array(83.0,  80),
            array(83.5,  80),
            array(84.0,  80),
            array(84.5,  80),
            array(85.0,  85),
            array(85.5,  85),
            array(86.0,  85),
            array(86.5,  85),
            array(87.0,  85),
            array(87.5,  85),
            array(88.0,  85),
            array(88.5,  85),
            array(89.0,  85),
            array(89.5,  85),
            array(90.0,  90),
            array(90.5,  90),
            array(91.0,  90),
            array(91.5,  90),
            array(92.0,  90),
            array(92.5,  90),
            array(93.0,  90),
            array(93.5,  90),
            array(94.0,  90),
            array(94.5,  90),
            array(95.0,  95),
            array(95.5,  95),
            array(96.0,  95),
            array(96.5,  95),
            array(97.0,  95),
            array(97.5,  95),
            array(98.0,  95),
            array(98.5,  95),
            array(99.0,  95),
            array(99.5,  95),
            array(100.0, 100),
        );
    }
}
